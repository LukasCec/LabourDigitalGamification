/* ===================================
   3D ENVIRONMENT STYLES
   =================================== */

.environment-3d {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 1;
}

.environment-3d.office {
  background: linear-gradient(180deg, #87ceeb 0%, #e0f2fe 50%, #f0f9ff 100%);
}

.environment-3d.factory {
  background: linear-gradient(180deg, #4a4a4a 0%, #6b5b3e 50%, #8b7355 100%);
}

.perspective-container {
  position: absolute;
  width: 100%;
  height: 100%;
  perspective: 1200px;
  perspective-origin: 50% 40%;
  transform-style: preserve-3d;
}

/* ===================================
   3D FLOOR WITH GRID
   =================================== */

.floor-3d {
  position: absolute;
  width: 600%;
  height: 600%;
  bottom: -50%;
  left: -250%;
  transform: rotateX(75deg) translateZ(-100px);
  transform-style: preserve-3d;
}

.floor-grid {
  position: absolute;
  width: 100%;
  height: 100%;
  background:
    repeating-linear-gradient(
      0deg,
      rgba(255, 255, 255, 0.1) 0px,
      transparent 2px,
      transparent 100px,
      rgba(255, 255, 255, 0.1) 102px
    );
}

.office .floor-grid {
  background-color: #cbd5e1;
  background-image:
    repeating-linear-gradient(0deg, rgba(100, 116, 139, 0.15) 0px, transparent 2px, transparent 80px, rgba(100, 116, 139, 0.15) 82px),
    repeating-linear-gradient(90deg, rgba(100, 116, 139, 0.15) 0px, transparent 2px, transparent 80px, rgba(100, 116, 139, 0.15) 82px);
}

.factory .floor-grid {
  background-color: #52525b;
  background-image:
    repeating-linear-gradient(0deg, rgba(255, 165, 0, 0.2) 0px, transparent 2px, transparent 100px, rgba(255, 165, 0, 0.2) 102px),
    repeating-linear-gradient(90deg, rgba(255, 165, 0, 0.2) 0px, transparent 2px, transparent 100px, rgba(255, 165, 0, 0.2) 102px);
}

.grid-line {
  position: absolute;
  width: 100%;
  height: 3px;
  background: rgba(255, 255, 255, 0.3);
  transform-style: preserve-3d;
}

.lane-markers {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.lane-marker {
  position: absolute;
  width: 4px;
  height: 100%;
  background: linear-gradient(180deg,
    transparent 0%,
    rgba(255, 255, 255, 0.6) 30%,
    rgba(255, 255, 255, 0.6) 70%,
    transparent 100%
  );
  top: 0;
}

.lane-marker.left {
  left: 33.33%;
}

.lane-marker.right {
  left: 66.66%;
}

/* ===================================
   OFFICE BUILDINGS (3D)
   =================================== */

.office-building {
  position: absolute;
  width: 300px;
  height: 800px;
  transform-style: preserve-3d;
  bottom: -200px;
}

.office-building.left-building {
  left: -150px;
  transform: translateZ(-500px) rotateY(15deg);
}

.office-building.right-building {
  right: -150px;
  transform: translateZ(-500px) rotateY(-15deg);
}

.building-face {
  position: absolute;
  background: linear-gradient(180deg, #1e3a8a 0%, #3b82f6 100%);
  box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.3);
}

.building-face.front {
  width: 300px;
  height: 800px;
  transform: translateZ(75px);
}

.building-face.side {
  width: 150px;
  height: 800px;
  background: linear-gradient(180deg, #1e40af 0%, #2563eb 100%);
  transform: rotateY(90deg) translateZ(225px);
}

.window-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(10, 1fr);
  gap: 15px;
  padding: 30px;
  height: 100%;
}

.window {
  background: rgba(255, 255, 255, 0.8);
  box-shadow:
    inset 0 0 10px rgba(135, 206, 250, 0.5),
    0 0 20px rgba(135, 206, 250, 0.3);
  animation: windowFlicker 5s infinite alternate;
}

@keyframes windowFlicker {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

.window:nth-child(3n) {
  animation-delay: 1s;
}

.window:nth-child(5n) {
  animation-delay: 2s;
}

/* ===================================
   FACTORY WALLS (3D)
   =================================== */

.factory-wall {
  position: absolute;
  width: 250px;
  height: 100%;
  transform-style: preserve-3d;
}

.factory-wall.left-wall {
  left: 0;
  transform: translateZ(-400px) translateX(-50px) rotateY(8deg);
}

.factory-wall.right-wall {
  right: 0;
  transform: translateZ(-400px) translateX(50px) rotateY(-8deg);
}

.wall-panels {
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-rows: repeat(8, 1fr);
  gap: 10px;
  background: linear-gradient(90deg, #3f3f46 0%, #52525b 100%);
  padding: 20px;
}

.metal-panel {
  background: linear-gradient(135deg, #71717a 0%, #52525b 50%, #3f3f46 100%);
  border: 2px solid #27272a;
  box-shadow:
    inset 0 2px 10px rgba(255, 255, 255, 0.1),
    inset 0 -2px 10px rgba(0, 0, 0, 0.5);
  position: relative;
}

.metal-panel::before {
  content: '';
  position: absolute;
  width: 10px;
  height: 10px;
  background: radial-gradient(circle, #a1a1aa 0%, #52525b 100%);
  border-radius: 50%;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
  top: 10px;
  left: 10px;
}

.metal-panel::after {
  content: '';
  position: absolute;
  width: 10px;
  height: 10px;
  background: radial-gradient(circle, #a1a1aa 0%, #52525b 100%);
  border-radius: 50%;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
  bottom: 10px;
  right: 10px;
}

.pipes {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.pipe {
  position: absolute;
  width: 30px;
  height: 100%;
  background: linear-gradient(90deg, #a3a3a3 0%, #737373 50%, #525252 100%);
  border-radius: 15px;
  box-shadow:
    inset -5px 0 10px rgba(0, 0, 0, 0.5),
    5px 0 15px rgba(0, 0, 0, 0.3);
}

.pipe-1 {
  left: 30px;
}

.pipe-2 {
  right: 30px;
}

/* ===================================
   OFFICE ELEMENTS (3D)
   =================================== */

.office-elements {
  position: absolute;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  pointer-events: none;
}

.desk-3d {
  position: absolute;
  width: 150px;
  height: 80px;
  left: 50%;
  bottom: 20%;
  transform-style: preserve-3d;
  transform: translateX(-50%);
}

.desk-top {
  position: absolute;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #92400e 0%, #b45309 100%);
  border-radius: 8px;
  box-shadow:
    0 10px 30px rgba(0, 0, 0, 0.5),
    inset 0 2px 5px rgba(255, 255, 255, 0.2);
  transform: translateZ(60px);
}

.desk-leg {
  position: absolute;
  width: 15px;
  height: 60px;
  background: linear-gradient(90deg, #78350f 0%, #92400e 100%);
  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
}

.desk-leg.leg-1 { left: 10px; top: 10px; transform: translateZ(0); }
.desk-leg.leg-2 { right: 10px; top: 10px; transform: translateZ(0); }
.desk-leg.leg-3 { left: 10px; bottom: 10px; transform: translateZ(0); }
.desk-leg.leg-4 { right: 10px; bottom: 10px; transform: translateZ(0); }

.filing-cabinet {
  position: absolute;
  width: 100px;
  height: 120px;
  left: 20%;
  bottom: 20%;
  transform-style: preserve-3d;
}

.cabinet-front {
  position: absolute;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, #71717a 0%, #52525b 100%);
  border: 3px solid #3f3f46;
  transform: translateZ(50px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.cabinet-front::before {
  content: '';
  position: absolute;
  width: 60%;
  height: 8px;
  background: #3f3f46;
  left: 20%;
  top: 50%;
  border-radius: 4px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.cabinet-side {
  position: absolute;
  width: 100px;
  height: 100%;
  background: linear-gradient(90deg, #52525b 0%, #3f3f46 100%);
  transform: rotateY(90deg) translateZ(50px);
}

.cabinet-top {
  position: absolute;
  width: 100%;
  height: 100px;
  background: linear-gradient(135deg, #71717a 0%, #52525b 100%);
  transform: rotateX(90deg) translateZ(50px);
}

/* ===================================
   FACTORY ELEMENTS (3D)
   =================================== */

.factory-elements {
  position: absolute;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  pointer-events: none;
}

.crate-3d {
  position: absolute;
  width: 120px;
  height: 120px;
  left: 50%;
  bottom: 20%;
  transform-style: preserve-3d;
  transform: translateX(-50%);
}

.crate-face {
  position: absolute;
  width: 120px;
  height: 120px;
  background: linear-gradient(135deg, #d97706 0%, #b45309 50%, #92400e 100%);
  border: 3px solid #78350f;
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
}

.crate-face::before {
  content: '';
  position: absolute;
  width: 80%;
  height: 2px;
  background: #78350f;
  left: 10%;
  top: 50%;
}

.crate-face::after {
  content: '';
  position: absolute;
  width: 2px;
  height: 80%;
  background: #78350f;
  left: 50%;
  top: 10%;
}

.crate-face.front { transform: translateZ(60px); }
.crate-face.back { transform: translateZ(-60px) rotateY(180deg); }
.crate-face.left { transform: rotateY(-90deg) translateZ(60px); }
.crate-face.right { transform: rotateY(90deg) translateZ(60px); }
.crate-face.top { transform: rotateX(90deg) translateZ(60px); }

.barrel-3d {
  position: absolute;
  width: 80px;
  height: 100px;
  left: 70%;
  bottom: 25%;
  transform-style: preserve-3d;
}

.barrel-body {
  position: absolute;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, #dc2626 0%, #991b1b 70%, #7f1d1d 100%);
  border-radius: 40px / 15px;
  box-shadow:
    inset -10px 0 20px rgba(0, 0, 0, 0.5),
    10px 10px 30px rgba(0, 0, 0, 0.6);
}

.barrel-ring {
  position: absolute;
  width: 100%;
  height: 8px;
  background: linear-gradient(90deg, #3f3f46 0%, #71717a 50%, #3f3f46 100%);
  left: 0;
  border-radius: 4px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
}

.barrel-ring.ring-1 { top: 20%; }
.barrel-ring.ring-2 { bottom: 20%; }

.barrel-top {
  position: absolute;
  width: 100%;
  height: 30px;
  background: radial-gradient(ellipse at center, #dc2626 0%, #991b1b 100%);
  border-radius: 50%;
  top: -5px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7);
}

.machinery-3d {
  position: absolute;
  width: 140px;
  height: 140px;
  left: 30%;
  bottom: 22%;
  transform-style: preserve-3d;
}

.machine-base {
  position: absolute;
  width: 100%;
  height: 60px;
  background: linear-gradient(180deg, #374151 0%, #1f2937 100%);
  bottom: 0;
  border-radius: 8px;
  box-shadow:
    0 10px 30px rgba(0, 0, 0, 0.7),
    inset 0 2px 10px rgba(255, 255, 255, 0.1);
}

.machine-gear {
  position: absolute;
  width: 100px;
  height: 100px;
  top: 0;
  left: 20px;
  background:
    conic-gradient(from 0deg,
      #f59e0b 0deg 45deg,
      #d97706 45deg 90deg,
      #f59e0b 90deg 135deg,
      #d97706 135deg 180deg,
      #f59e0b 180deg 225deg,
      #d97706 225deg 270deg,
      #f59e0b 270deg 315deg,
      #d97706 315deg 360deg);
  border-radius: 50%;
  box-shadow:
    0 5px 20px rgba(0, 0, 0, 0.5),
    inset 0 0 20px rgba(0, 0, 0, 0.3);
  animation: rotateGear 4s linear infinite;
}

.machine-gear::before {
  content: '';
  position: absolute;
  width: 40px;
  height: 40px;
  background: radial-gradient(circle, #1f2937 0%, #111827 100%);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.8);
}

@keyframes rotateGear {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ===================================
   CEILING
   =================================== */

.ceiling-3d {
  position: absolute;
  width: 600%;
  height: 600%;
  top: -50%;
  left: -250%;
  transform: rotateX(-75deg) translateZ(800px);
  transform-style: preserve-3d;
}

.office-ceiling {
  background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
}

.factory-ceiling {
  background: linear-gradient(180deg, #27272a 0%, #18181b 100%);
}

.ceiling-lights {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 50px;
}

.ceiling-light {
  width: 150px;
  height: 80px;
  background: linear-gradient(180deg, #cbd5e1 0%, #e2e8f0 100%);
  border-radius: 10px;
  box-shadow:
    0 10px 50px rgba(255, 255, 255, 0.5),
    0 0 100px rgba(135, 206, 250, 0.8);
  animation: lightPulse 3s ease-in-out infinite;
}

@keyframes lightPulse {
  0%, 100% {
    box-shadow: 0 10px 50px rgba(255, 255, 255, 0.5), 0 0 100px rgba(135, 206, 250, 0.8);
  }
  50% {
    box-shadow: 0 10px 70px rgba(255, 255, 255, 0.8), 0 0 150px rgba(135, 206, 250, 1);
  }
}

.overhead-cranes {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: space-around;
  padding: 50px;
}

.crane {
  width: 200px;
  height: 40px;
  background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);
  box-shadow:
    0 10px 30px rgba(0, 0, 0, 0.7),
    inset 0 2px 10px rgba(255, 255, 255, 0.2);
  position: relative;
}

.crane::before {
  content: '';
  position: absolute;
  width: 10px;
  height: 100px;
  background: linear-gradient(180deg, #71717a 0%, #52525b 100%);
  left: 50%;
  top: 100%;
  transform: translateX(-50%);
  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
}

.crane::after {
  content: '';
  position: absolute;
  width: 30px;
  height: 30px;
  background: radial-gradient(circle, #ef4444 0%, #dc2626 100%);
  border-radius: 50%;
  left: 50%;
  top: 140px;
  transform: translateX(-50%);
  box-shadow: 0 5px 20px rgba(239, 68, 68, 0.8);
}

